# README

## Описание

Этот проект включает два скрипта на Python, предназначенные для работы с базой данных, которая содержит информацию о фермерских рынках.

1. **`create_farmer_markets_db.py`** — скрипт для создания базы данных из CSV-файла (`Export.csv`). Он генерирует таблицы и заполняет их данными.
2. **`queries_to_database.py`** — скрипт для выполнения SQL-запросов к базе данных. Он использует командную строку для выполнения различных запросов и получения информации о фермерских рынках.

## Установка

### Требования

Для работы проекта необходимо установить следующие библиотеки:
- `psycopg2` — для работы с PostgreSQL.
- `argparse` — для обработки аргументов командной строки.
- `csv` — для обработки CSV-файлов.

Для установки зависимостей выполните:

```bash
pip install -r requirements.txt
```

## Конфигурация

Для правильной работы скриптов необходимо создать файл конфигурации `config.json`, который должен располагаться в той же папке, что и ваши Python-скрипты. В этом файле указываются настройки подключения к базе данных.

Пример структуры файла конфигурации можно посмотреть в `config_example.json`

## Запуск и описание команд

### Запуск скриптов

### 1. Создание базы данных

Для создания базы данных из CSV-файла выполните следующий команду:

```bash
python create_farmer_markets_db.py
```

Этот скрипт создаст базу данных и заполнил ее данными из файла Export.csv.

### 2. Запросы к базе данных

После создания базы данных с помощью скрипта `create_farmer_markets_db.py`, вы можете выполнять запросы к базе данных через скрипт `queries_to_database.py`, используя командную строку. Для выполнения запросов необходимо передавать команды и соответствующие параметры.

#### Синтаксис

Чтобы выполнить запрос, используйте следующую команду:

```bash
python queries_to_database.py <command> [options]
```

### Доступные команды

#### 1. `show_all_markets`

**Описание**: Показать все фермерские рынки, содержащиеся в базе данных.

**Пример использования**:

```bash
python queries_to_database.py show_all_markets
```

#### 2. `get_information_about_market_by_fmid`

**Описание**: Эта команда позволяет получить информацию о фермерском рынке по его уникальному идентификатору (FMID). Используйте этот запрос, если вам нужно получить подробности о конкретном рынке.

**Параметры**:
- `--fmid`: Уникальный идентификатор фермерского рынка (FMID). Это обязательный параметр, который необходимо указать, чтобы получить информацию о конкретном рынке.

**Пример использования**:

Чтобы получить информацию о рынке с FMID 123, выполните команду:

```bash
python queries_to_database.py get_information_about_market_by_fmid --fmid 1019242
```

#### 3. `get_markets_in_city`

**Описание**: Эта команда позволяет получить список фермерских рынков, расположенных в указанном городе. Используйте этот запрос, если вы хотите узнать, какие рынки доступны в определённом городе.

**Параметры**:
- `--city`: Название города, для которого нужно получить список фермерских рынков. Этот параметр обязателен.

**Пример использования**:

Чтобы получить все фермерские рынки, находящиеся в городе "Moscow", выполните команду:

```bash
python queries_to_database.py get_markets_in_city --city "Houston"
```
#### 4. `get_markets_by_product`

**Описание**: Эта команда позволяет получить список фермерских рынков, которые предлагают определённый продукт. Используйте этот запрос, если вам нужно узнать, в каких рынках продаётся конкретный товар.

**Параметры**:
- `--product`: Название продукта, по которому нужно найти фермерские рынки. Этот параметр обязателен.

**Пример использования**:

Чтобы получить список рынков, предлагающих "Apples", выполните команду:

```bash
python queries_to_database.py get_markets_by_product --product "Organic"
```
#### 5. `get_markets_by_payment_method`

**Описание**: Эта команда позволяет получить список фермерских рынков, которые принимают определённый способ оплаты. Используйте этот запрос, если вам нужно узнать, какие рынки поддерживают конкретный метод оплаты.

**Параметры**:
- `--payment_method`: Способ оплаты, который принимают рынки (например, "Cash", "Card"). Этот параметр обязателен.

**Пример использования**:

Чтобы получить список рынков, принимающих оплату картой, выполните команду:

```bash
python queries_to_database.py get_markets_by_payment_method --payment_method "Credit"
```
### Дополнительные опции

Вы можете получить список всех доступных команд и опций, используя флаг `-h` или `--help`. 

#### Пример использования:

```bash
python queries_to_database.py -h
python queries_to_database.py --help
```